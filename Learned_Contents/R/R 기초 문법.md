## R 기초 문법

R: 통계 분석에 사용하는 프로그래밍 언어.

### R의 장단점

**장점**

> * 프로그래밍에 익숙하지 않아도 설치와 환경 구축이 손쉬움
> * 다른 프로그래밍 언어에 비해 한글 처리가 쉬움

**단점**

> * 범용 프로그래밍 언어(C, Java, Python 등)에 비해 처리 속도가 느림
> * 데이터 분석에만 특화되어 있다 보니 대규모 IT 서비스 개발에 접목하기 어려움

* **참고자료**

> * R 다운로드: https://www.r-project.org/
> * R Studio 다운로드: https://rstudio.com/
> * 전자책(R을 이용한 데이터 처리 & 분석 실무 - 더북):
>    https://thebook.io/006723/
> * 처음 시작하는 R데이터 분석 -한빛미디어, 저자 깃허브: 
>   https://github.com/newstars/HelloR

### **R 변수**

> * 스칼라, 펙터 : 1차원 변수
> * 벡터 : Java에서의 배열
> * 리스트: k,v
> * 행렬: 동일 타입의 matrix
> * 배열: 다차원 행렬
> * 데이터 프레임 : 다중(데이터타입) 행렬

#### **스칼라**

스칼라란 단일 차원의 값을 뜻하는 것으로 숫자 1, 2, 3, …을 예로 들 수 있다. 반면 좌표 평면 위에 있는 점인 (1, 2)는 2차원 값이므로 스칼라에 해당하지 않는다.

#### **NA: 상수**

R과 다른 언어의 가장 큰 차이 중 하나가 바로 NANot Available 상수다. NA는 데이터 값이 없음을 뜻한다. 예를 들어, 4명의 시험 점수가 있을 때 3명의 점수는 각각 80, 90, 75지만 4번째 사람의 점수를 모를 경우 NA를 이용해 4번째 사람의 점수를 표현한다.

#### **NULL과 NA의 차이**

NA는 결측치, 즉 값이 빠져 있는 경우를 뜻한다. 결측치가 존재하는 이유로는 데이터 입력 중 실수로 값을 입력하지 않은 경우, 값을 어떤 이유로든 관찰되지 못한 경우(예를 들어, 인구 조사에서 특정 가구가 소득을 기재하지 않은 경우), 마지막으로 해당 항목에 적절한 값이 없어서 값이 입력되지 않은 경우(예를 들어, 약품의 냄새를 기록하고 있는 칸에서 특정 약품은 향이 없는 경우)를 들 수 있다.반면 NULL은 프로그래밍의 편의를 위해 미정(undefined) 값을 표현하는 데 사용하는 개념이다. 

is_even이라는 변수에 a 변수의 값이 짝수면 TRUE, 홀수면 FALSE를 저장하는 다음 예를 보자.

is_even <- NULL if (a 가 짝수면) {   is_even <- TRUE } else {   is_even <- FALSE }

위 코드에서 if 조건문이 실행되기 전에는 is_even에 어떤 값을 줘야 할지 알 수 없어 NULL로 초기화했다. 그리고 if 문을 지나면서 is_even에 적절한 값이 할당되었다. 이처럼 NULL은 변숫값이 아직 미정인 상태를 표현하는 목적으로 사용한다.

#### **팩터**

팩터Factor는 범주형Categorical 데이터(자료)를 표현하기 위한 데이터 타입이다.범주형 데이터란 데이터가 사전에 정해진 특정 유형으로만 분류되는 경우를 뜻한다. 예를 들어, 방의 크기를 대, 중, 소로 나누어 기재하고 있을 때 특정 방의 크기를 ‘대’라고 적는다면 이 값은 범주형 데이터다. 이와 같이 범주형 변수가 담을 수 있는 값의 목록(이 예에서는 대, 중, 소)을 레벨(수준)level이라고 한다. 따라서 범주형 데이터를 저장하는 데이터 타입인 팩터에는 관측된 값뿐만 아니라 관측 가능한 값의 레벨도 나열해야 한다.

범주형 데이터는 또 다시 명목형Nominal과 순서형Ordinal으로 구분된다. 명목형 데이터는 값들 간에 크기 비교가 불가능한 경우를 뜻한다. 예를 들어, 정치적 성향을 좌파, 우파로 구분하여 저장한 데이터는 명목형이다. 반면 순서형 데이터는 대, 중, 소와 같이 값에 순서를 둘 수 있는 경우를 말한다.범주형 데이터에 상반하는 개념에는 수치형(Numerical) 데이터가 있다. 수치형 데이터는 값을 측정하거나 개수를 세는 경우와 같이 숫자로 나온 값을 의미한다. 예를 들어, 방의 크기를 30㎡, 28㎡와 같이 기록하는 경우나 학생들의 성적이 이에 해당한다.

#### **벡터**

벡터Vector는 다른 프로그래밍 언어에서 흔히 접하는 배열의 개념으로, 한 가지 스칼라 데이터 타입의 데이터를 저장할 수 있다. 예를 들어, 숫자만 저장하는 배열, 문자열만 저장하는 배열이 벡터에 해당한다.R의 벡터는 슬라이스Slice를 제공한다. 슬라이스란 배열의 일부를 잘라낸 뒤 이를 또 다시 배열처럼 다루는 개념을 뜻한다.또한, 벡터의 각 셀에는 이름을 부여할 수 있다. 따라서 벡터에 저장된 요소들을 색인을 사용하여 접근하는 것뿐 아니라 이름을 사용해서도 접근할 수 있다. 이런 특징을 사용하면 데이터를 좀 더 의미 있는 형태로 저장할 수 있다.

**리스트**

자료 구조 책에서 리스트List는 배열과 비교할 때 데이터를 중간 중간에 삽입하는 데 유리한 구조로 설명한다. 물론 그러한 장점은 동일하지만 R에서 리스트는 데이터를 접근한다는 관점에서 다른 언어의 해시 테이블 또는 딕셔너리로 종종 설명된다. 즉, 리스트는 ‘(키, 값)’ 형태의 데이터를 담는 연관 배열Associative Array이다.

또 다른 리스트의 특징은 벡터와 달리 값이 서로 다른 데이터 타입을 담을 수 있다는 점이다. 따라서 “이름”이라는 키에 “홍길동”이라는 문자열 값을 저장하고, “성적”이라는 키에 95라는 숫자 값을 저장할 수 있다.

**데이터프레임**

데이터 프레임Data Frame은 처리할 데이터를 마치 엑셀의 스프레드시트와 같이 표 형태로 정리한 모습을 하고 있다. 데이터 프레임의 각 열에는 관측값의 이름이 저장되고, 각 행에는 매 관측 단위마다 실제 얻어진 값이 저장된다.

```R
> d1 <- data.frame(name=c("kim","lee","seo"),
                   ko=c(90,80,98),
                   en=c(100,78,92),
                   ma=c(99,68,88),
                   stringsAsFactors = F)
> result <- d1[,c("ko"),drop=F]
```


drop: -> 뽑아낼 때 데이터프레임 구조를 유지한다(F), 벡터로 뽑아낸다(T)
stringsAsFactors: 데이터프레임을 생성할 때, 문자열을 팩터로 저장할 것인지 결정하는 옵션(Default = T)



### **엑셀 파일 가져오기**

on console

```R
> install.packages(“readxl”)
```

**워크스페이스에 엑셀 파일이 있는 경우**

```R
library(readxl)>ex1 <- read_excel("data_ex.xls")>View(ex1)
```


**워크스페이스 외부에 파일이 있는 경우**

```R
library(readxl)ex1 <- read_excel("C:/Users/i/Downloads/HelloR-master/HelloR-master/Data/data_ex.xls")
View(ex1)
```



### **TXT파일 가져오기**

```R
ex1 <- read.table("data_exx.TXT", encoding = "UTF-8", header=TRUE)> View(ex1)
```

encoding 옵션을 설정해줘야 한글이 깨지지 않는다.헤더 옵션을 걸지 않으면 헤더가 데이터로 들어온다.


```R
ex1 <- read.table("data_exx.TXT", fileEncoding = "UTF-8", header = TRUE, skip=1)> colnames(ex1)<-c("ID","NAME","AGE")
View(ex1)skip
```

 skip옵션을 걸어서 헤더를 가져오지 않고, 별도 생성해줄 수 있다.(헤더가 한글로 만들어져 깨지는 경우 이용)

```R
 ex1 <- read.table("mydata2.txt", fileEncoding = "UTF-8", header=TRUE,sep = ",",stringsAsFactors = FALSE)> str(ex1)
```

,(comma)로 구분자를 두어 sep옵션으로 데이터를 나눌 수 있다.
텍스트파일에서는 fileEncodingcsv파일에서는 encoding옵션을 주어야 한글이 깨지지 않는다.