## 프레임워크 개요

* 소프트웨어 관점에서 프레임워크 의미는 `아키텍처에 해당하는 골격 코드`다.
* 프레임워크는 개발자에게 모든 것을 위임 X, 프레임워크의 기본 아키텍처 위에 살 붙이는 작업을 개발자가 수행한다.

### 프레임워크의 장점

* **빠른 구현 시간**
  개발자는 비즈니스 로직만 구현하면 되므로 제한된 시간에 많은 기능을 구현할 수 있다.
* **쉬운 관리**
  같은 프레임워크가 적용되면 아키텍처가 같으므로 관리하기가 쉽다.
* **개발자들의 상향 평준화**
  초급 개발자도 프레임워크를 통해 세련되고 효율적인 코드를 생성해낼 수 있다.
* **검증된 아키텍처의 재사용과 일관성 유지**
  아키텍처에 관한 별다른 고민이나 검증 없이 소프트웨어를 개발할 수 있다.



## 스프링 프레임워크

### 스프링 탄생 배경

* 스프링 프레임워크 등장 이전 자바 기반 엔터프라이즈 애플리케이션은 대부분 `EJB(Enterprise Java Bean)`로 개발됌.
* `EJB`는 스펙이 복잡해 학습, 개발, 유지보수 모두 어렵고, 고가의 WAS(Web Application Server)가 필요
* `EJB` 기술 자체의 문제라기보다는 EJB를 EJB답게 사용하기가 어려움
* 스프링은 평범한 `POJO(Plain Old Java Object)`를 사용하며, `EJB`에서만 가능했던 것들을 지원함
* 스프링은 디자인 패턴이 적용되어 배포되므로 EJB를 사용할 때 알아야 했던 많은 디자인 패턴 신경쓰지 않아도 됌

### 스프링 프레임워크의 특징

> 스프링의 특징: `IoC`와 `AOP`를 지원하는 `경량`의 `컨테이너` 프레임워크

1. 경량

   * 스프링은 여러 개의 모듈로 구성되어 있고, 각 모듈은 하나 이상의 JAR 파일로 구성됌, 이 몇 개의 JAR 파일만 있으면 개발과 실행 모두 가능
   * 스프링 프레임워크가 POJO 형태의 객체를 관리하는데, POJO는 클래스를 구현하는 데 특별한 규칙이 없는 단순하고 가벼운 객체이므로 기존의 EJB 객체를 관리하는 것보다 가볍고 빠름

2. 제어의 역행(Inversion of Control, IoC)

   * 제어의 역행으로 낮은 결합도(애플리케이션을 구성하는 객체간의 느슨한 결합)를 유지함

   * 객체 생성을 자바 코드로 직접 처리하는 것이 아닌, 컨테이너가 대신 처리
     -> 소스에 의존관계가 명시되지 않으므로 결합도가 떨어져 유지보수가 편리

     ![스크린샷 2021-01-09 오후 1.48.08]($md-images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-01-09%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%201.48.08.png)

     

3. 관점지향 프로그래밍(Aspect Oriented Programming, AOP)

   * 비즈니스 메소드 개발시 핵심 비즈니스 로직과 각 비즈니스 메소드마다 <u>반복해 등장하는 공통 로직 분리</u>해 응집도 높게 개발할 수 있도록 지원

4. 컨테이너

   * 특정 객체의 생성과 관리 담당
   * 객체 운용에 필요한 다양한 기능 담당
   * 일반적으로 서버 안에 포함되어 배포 및 구동
   * 대표적으로 Servlet 객체 생성, 관리하는 `Servlet 컨테이너` 와 EJB 객체를 생성, 관리하는 `EJB 컨테이너` 있음
   * 애플리케이션 운용에 필요한 객체를 생성하고 객체 간의 의존관계를 관리한다는 점에서 스프링도 일종의 컨테이너



## IoC 컨테이너

대부분 IoC 컨테이너는 각 컨테이너에서 관리할 객체들을 위한 별도의 설정 파일이 있다. Servlet 컨테이너는 web.xml에, EJB 컨테이너는 ejb-jar.xml 파일에 해당 컨테이너가 생성하고 관리할 클래스들을 등록한다.스프링 프레임워크도 다른 컨테이너와 마찬가지로 자신이 관리할 클래스들이 등록된 XML 설정 파일이 필요하다.(Spring Bean Configuration File)



### 스프링 컨테이너의 종류

스프링에서는 BeanFactory와 이를 상속한 ApplicationContext 두 가지 유형의 컨테이너를 제공한다.

* BeanFactory
  * 설정 파일에 등록된 bean 객체 생성, 관리하는 가장 기본적인 컨테이너 기능만 제공
  * 컨테이너 구동될 때 bean 객체 생성하는 것이 아닌, 클라이언트 요청(Lookup)에 의해서만 객체 생성하는 지연 로딩(Lazy Loading) 방식 사용
  * 일반적인 스프링 프로젝트에서 사용하는 경우 없음
* ApplicationContext
  * bean 객체 관리 외에도 트랜잭선 관리, 메시지 기반 다국어 처리 등 다양한 기능 지원
  * 컨테이너 구동되는 시점에 bean 등록 클래스들을 객체 생성하는 즉시 로딩(pre-loading) 방식 동작

대부분 스프링 프로젝트는 ApplicationContext 유형의 컨테이너를 이용한다. 구현 클래스는 매우 다양한데, 이를 모두 살펴볼 수도 없으며 의미도 없다. 가장 많이 사용하는 두 개의 클래스만 알고 있으면 된다.

| 구현 클래스                  | 기능                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| GenericXmlApplicationContext | 파일 시스템이나 클래스 경로에 있는 XML 설정 파일을 로딩하여 구동하는 컨테이너 |
| XmlWebApplicationContext     | 웹 기반의 스프링 애플리케이션을 개발할 때 사용하는 컨테이너  |



## 스프링 XML 설정

### \<Beans> 루트 엘리먼트

스프링 컨테이너는 bean 저장소에 해당하는 XML 설정 파일을 참조하여 bean의 생명 주기를 관리하고 여러가지 서비스를 제공한다. 따라서 스프링 프로젝트 전체에서 가장 중요한 역할을 담당하며, 이 설정 파일을 정확하게 작성하고 관리하는 것이 무엇보다 중요하다.

* 스프링 설정 파일 이름은 무엇이든 사용해도 되지만 \<beans>를 루트 엘리먼트로 사용해야 함.
* \<beans> 시작 태그에 네임스페이스를 비롯한 XML 스키마 관련 정보 설정

### \<import> 엘리먼트

* 많은 설정을 기능별 여러 XML 파일로 나눠 설정하는 것이 효율적이므로, 분리 작성한  설정 파일을 하나로 통합할 때 사용

### \<bean> 엘리먼트

스프일 설정 파일에 클래스를 등록하려면 \<bean> 엘리먼트를 사용한다. 이 때 id와 class 속성을 사용하는데, id 속성은 생략할 수 있지만 class 속성은 필수이다. class 속성에 클래스를 등록할 때는 정확한 패키지 경로와 클래스 이름을 지정해야 한다.

* id: \<bean> 객체를 위한 이름을 지정할때 사용하는 속성
* name: id와 같은 기능을 하지만, 자바 식별자 작성 규칙을 따르지 않는 문자열(특수기호)도 허용
* id, name 속성값 모두 전체 스프링 파일 내에서 유일해야 함

### \<bean> 엘리먼트 속성

* **init-method 속성**
  객체 생성 후 멤버변수 초기화를 위한 메소드 지정
* **destroy-method 속성**
  컨테이너가 객체를 삭제하기 직전에 호출된 임의의 메소드 지정
* **lazy-init 속성**
  클래스가 즉시 로딩이 아닌 지연 로딩 방식으로 생성되도록 설정
* **scope 속성**
  bean의 사용 범위(싱글톤 or prototype)을 지정, default: 싱글톤

